Binary Upgrade of FreeBSD 6.0 to 6.1

Get link

Facebook

Twitter

Pinterest

Email

Other Apps

June 29, 2006

Several months ago I posted how I used Colin Percival's freebsd-update program to perform a binary upgrade from FreeBSD 5.4 to 6.0 remotely over SSH.  Thanks to Colin's latest work, I was able to successfully perform a binary upgrade from FreeBSD 6.0 to 6.1 remotely over SSH.hacom:/root/upgrade# uname -aFreeBSD hacom.taosecurity.com 6.0-SECURITY FreeBSD 6.0-SECURITY #0: Tue Apr 18 08:56:09 UTC 2006     root@builder.daemonology.net:/usr/obj/usr/src/sys/GENERIC  i386hacom:/root# fetch http://www.daemonology.net/freebsd-upgrade-6.0-to-6.1/upgrade-6.0-to-6.1.tgzupgrade-6.0-to-6.1.tgz                          0% of 4706 kB hacom:/root# sha256 upgrade-6.0-to-6.1.tgzSHA256 (upgrade-6.0-to-6.1.tgz) = 29075fc5711e0b20d879c69d12bbe5414c1c56d597c8116da7acc0d291116d2fhacom:/root# tar -xzvf upgrade-6.0-to-6.1.tgzx upgradex upgrade/upgrade.shx upgrade/6.1-indexx upgrade/6.0-indexhacom:/root# cd upgradehacom:/root/upgrade# ./upgrade.sh^M^MExamining system... done.The following components of FreeBSD seem to be installed:kernel|generic world|base world|dict world|doc world|manpagesThe following components of FreeBSD do not seem to be installed:kernel|smp src|base src|bin src|contrib src|crypto src|etc src|gamessrc|gnu src|include src|krb5 src|libexec src|lib src|release src|rescuesrc|sbin src|secure src|share src|sys src|tools src|ubin src|usbinworld|catpages world|games world|info world|proflibs^MDoes this look reasonable (y/n)? yExamining system (this will take a bit longer)... done.The following files from FreeBSD 6.0 have been modified since they wereinstalled, but will be deleted or overwritten by new versions:/.cshrc /root/.cshrc /usr/share/man/whatisThe following files from FreeBSD 6.0 have been modified since they wereinstalled, and will not be touched:/etc/hosts /etc/manpath.config /etc/master.passwd /etc/motd /etc/passwd/etc/pwd.db /etc/shells /etc/spwd.db /etc/ttys /var/db/locate.database/var/log/sendmail.stThe following files from FreeBSD 6.0 have been modified since they wereinstalled, and the changes in FreeBSD 6.1 will be merged into theexisting files:/etc/groupDoes this look reasonable (y/n)? yPreparing to fetch files... done.Fetching 1729 patches....10....20....30....40....edited...1720.... done.Applying patches... done.Fetching 433 files....10....20....30....40....50....60...edited...done.Decompressing and verifying... done.Attempting to automatically merge configuration files... done.The following changes, which occurred between FreeBSD 6.0 and FreeBSD6.1, have been merged into /etc/group:--- merge/old/etc/group Thu Jun 29 07:03:59 2006+++ merge/new/etc/group Thu Jun 29 07:04:00 2006@@ -41,5 +41,6 @@ student8:*:1012: student9:*:1013: student10:*:1014: student11:*:1015: richard:*:1016:+audit:*:77:Does this look reasonable (y/n)? yInstalling new kernel into /boot/GENERIC... done.Moving /boot/kernel to /boot/kernel.old... done.Moving /boot/GENERIC to /boot/kernel... done.Removing schg flag from existing files... done.Installing new non-kernel files... done.Removing left-over files from FreeBSD 6.0... done.To start running FreeBSD 6.1, reboot.hacom:/root/upgrade# reboothacom# freebsd-update fetchFetching updates signature...Fetching updates...Fetching hash list signature...Fetching hash list...Examining local system...Fetching updates.../boot/kernel/smbfs.ko.../usr/libexec/sendmail/sendmail.../usr/sbin/ypserv...Updates fetchedTo install these updates, run: '/usr/local/sbin/freebsd-update install'hacom# freebsd-update installBacking up /boot/kernel/smbfs.ko...Installing new /boot/kernel/smbfs.ko...Backing up /usr/libexec/sendmail/sendmail...Installing new /usr/libexec/sendmail/sendmail...Backing up /usr/sbin/ypserv...Installing new /usr/sbin/ypserv...hacom# reboothacom:/home/richard$ uname -aFreeBSD hacom.taosecurity.com 6.1-RELEASE FreeBSD 6.1-RELEASE #0: Sun May  7 04:32:43 UTC 2006     root@opus.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  i386I like it.  Easy, fast, no compiling and it works.  Kudos to Colin!
