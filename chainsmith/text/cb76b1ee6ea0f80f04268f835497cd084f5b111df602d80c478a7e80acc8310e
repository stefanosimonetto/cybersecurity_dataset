Simple GnuPG Key Creation

Get link

Facebook

Twitter

Pinterest

Email

Other Apps

April 23, 2005

I was recently asked to provide my GnuPG public key to facilitate sharing encrypted documents.  I realized I needed to set up a public key with my richard at taosecurity dot com mailing address.  Here's how I did it.  First I installed the FreeBSD security/gnupg-devel package.  Then I was ready to begin.  I started by creating my key.  Where necessary I've modified my email address in the listing below to spoil simple harvesting methods.orr:/home/richard$ gpg --gen-keygpg (GnuPG) 1.4.0; Copyright (C) 2004 Free Software Foundation, Inc.This program comes with ABSOLUTELY NO WARRANTY.This is free software, and you are welcome to redistribute itunder certain conditions. See the file COPYING for details.gpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more informationgpg: directory `/home/richard/.gnupg' createdgpg: new configuration file `/home/richard/.gnupg/gpg.conf' createdgpg: WARNING: options in `/home/richard/.gnupg/gpg.conf' are not yet active during this rungpg: keyring `/home/richard/.gnupg/secring.gpg' createdgpg: keyring `/home/richard/.gnupg/pubring.gpg' createdPlease select what kind of key you want:   (1) DSA and Elgamal (default)   (2) DSA (sign only)   (5) RSA (sign only)Your selection? 1DSA keypair will have 1024 bits.ELG-E keys may be between 1024 and 4096 bits long.What keysize do you want? (2048) Requested keysize is 2048 bitsPlease specify how long the key should be valid.         0 = key does not expire        = key expires in n days      w = key expires in n weeks      m = key expires in n months      y = key expires in n yearsKey is valid for? (0) 0Key does not expire at allIs this correct? (y/N) yYou need a user ID to identify your key; the software constructs the user IDfrom the Real Name, Comment and Email Address in this form:    "Heinrich Heine (Der Dichter) heinrichh@duesseldorf.de"Real name: Richard BejtlichEmail address: richard_at_taosecurity_dot_comComment: You selected this USER-ID:    "Richard Bejtlich richard_at_taosecurity_dot_com"Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? oYou need a Passphrase to protect your secret key.Enter passphrase:                   Repeat passphrase:                    We need to generate a lot of random bytes. It is a good idea to performsome other action (type on the keyboard, move the mouse, utilize thedisks) during the prime generation; this gives the random numbergenerator a better chance to gain enough entropy.++++++++++.gpg: /home/richard/.gnupg/trustdb.gpg: trustdb createdgpg: key 752B57C7 marked as ultimately trustedpublic and secret key created and signed.gpg: checking the trustdbgpg: 3 marginal(s) needed, 1 complete(s) needed, PGP trust modelgpg: depth: 0  valid:   1  signed:   0  trust: 0-, 0q, 0n, 0m, 0f, 1upub   1024D/752B57C7 2005-04-23      Key fingerprint = 2B43 9A2E 6925 D581 5E34  FD6B 020C E655 752B 57C7uid                  Richard Bejtlich richard_at_taosecurity_dot_comsub   2048g/8BA44991 2005-04-23That's it.  I then listed my keys.orr:/home/richard$ gpg --list-keysgpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more information/home/richard/.gnupg/pubring.gpg--------------------------------pub   1024D/752B57C7 2005-04-23uid                  Richard Bejtlich richard_at_taosecurity_dot_comsub   2048g/8BA44991 2005-04-23orr:/home/richard$ gpg --list-secret-keysgpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more information/home/richard/.gnupg/secring.gpg--------------------------------sec   1024D/752B57C7 2005-04-23uid                  Richard Bejtlich richard_at_taosecurity_dot_comssb   2048g/8BA44991 2005-04-23Here's how to see the key fingerprint. The fingerprint is a way to describe my key in shorthand form.orr:/home/richard$ gpg --fingerprintgpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more information/home/richard/.gnupg/pubring.gpg--------------------------------pub   1024D/752B57C7 2005-04-23      Key fingerprint = 2B43 9A2E 6925 D581 5E34  FD6B 020C E655 752B 57C7uid                  Richard Bejtlich richard_at_taosecurity_dot_comsub   2048g/8BA44991 2005-04-23To make my public key available in ASCII form, I exported it to a file.orr:/home/richard$ gpg --export --armor richard_at_taosecurity_dot_com > richard_at_taosecurity_dot_com.key.gpg.ascgpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more informationYou can access my public key here.Now I wanted to create a revocation key, to assist me in removing my public key from a keyserver should my private key ever be compromised.orr:/home/richard$ gpg --gen-revoke richard_at_taosecurity_dot_com >  richard_at_taosecurity_dot_com.com.revoke.gpg.ascgpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more informationsec  1024D/752B57C7 2005-04-23 Richard Bejtlich richard_at_taosecurity_dot_comCreate a revocation certificate for this key? (y/N) yPlease select the reason for the revocation:  0 = No reason specified  1 = Key has been compromised  2 = Key is superseded  3 = Key is no longer used  Q = Cancel(Probably you want to select 1 here)Your decision? 0Enter an optional description; end it with an empty line:Revoke Reason for revocation: No reason specifiedRevokeIs this okay? (y/N) yYou need a passphrase to unlock the secret key foruser: "Richard Bejtlich richard_at_taosecurity_dot_com"1024-bit DSA key, ID 752B57C7, created 2005-04-23Enter passphrase:                   ASCII armored output forced.Revocation certificate created.Please move it to a medium which you can hide away; if Mallory getsaccess to this certificate he can use it to make your key unusable.It is smart to print this certificate and store it away, just in caseyour media become unreadable.  But have some caution:  The print system ofyour machine might store the data and make it available to others!orr:/home/richard$ chmod 400 richard_at_taosecurity_dot_com.revoke.gpg.asc Finally, I wanted to make this new public key available on public keyservers.  I have to specify my public key ID 752B57C7, which is seen in the --list-keys output above and is also the last eight characters of my key fingerprint.orr:/home/richard$ gpg --send-keys 752B57C7gpg: WARNING: using insecure memory!gpg: please see http://www.gnupg.org/faq.html for more informationgpg: sending key 752B57C7 to hkp server subkeys.pgp.netI also submitted my public key to www.keyserver.net, which has a Web-accessible search form.  By default GnuPG sent my key to subkeys.pgp.net, Web page. To search the pgp.net keyservers, visit www.pgp.net/pgpnet/wwwkeys.html.If someone cares to send me a message encrypted with my public key, a future blog entry will show how to decrypt it.
